(()=>{var e={733:(e,t,s)=>{const i=s(643),l={Cruiser:{name:"Cruiser",size:2},Destroyer:{name:"Destroyer",size:3},Battlecruiser:{name:"Battlecruiser",size:4},Battleship:{name:"Battleship",size:5}},r=Array.from({length:10},((e,t)=>t)).map((e=>10*e)),c=r.map((e=>e+9));e.exports=class{constructor(e=!1){this._occupiedCells=[],this._missedShotsCells=[],this._shipList=[],this._isAIBoard=e}placeShip(e,t,s){if(null===e)return;s=Number(s),this._isAIBoard&&(t=this.randomNumber(2),s=this.randomNumber(100));let r=[];for(let i=0;i<l[e].size;i++)t?r.push(s+i):r.push(s+10*i);if(!this.checkWallCollisions(r,t)||!this.checkShipCollisions(r,t))return!1;{this._occupiedCells=this._occupiedCells.concat(r);let t=new i(l[e],r);this._shipList.push(t)}}checkWallCollisions(e,t){let s;if(t&&void 0===s){let t=e.slice(1);for(let e=1;e<11;e++){for(let i of t)if(i===11*e-e){s=!0;break}if(s)break}}else e[e.length-1]>99&&(s=!0);return!s}checkShipCollisions(e,t){let s,i=[].concat(e);if(t)for(let t=0;t<e.length;t++)0!==t||r.includes(e[0])?t!==e.length-1||c.includes(e[e.length-1])||(i.push(e[t]-9),i.push(e[t]+1),i.push(e[t]+11)):(i.push(e[t]-11),i.push(e[t]-1),i.push(e[t]+9)),i.push(e[t]-10),i.push(e[t]+10);else for(let t=0;t<e.length;t++)0===t?(i.push(e[t]-11),i.push(e[t]-10),i.push(e[t]-9)):t===e.length-1&&(i.push(e[t]+9),i.push(e[t]+10),i.push(e[t]+11)),i.push(e[t]-1),i.push(e[t]+1);for(let e of i)if(this._occupiedCells.includes(e)){s=!0;break}return!s}randomNumber(e){return Math.floor(Math.random()*e)}receiveShot(e){this._occupiedCells.includes(e)?this._shipList.filter((t=>t.getCellsOccupied.includes(e)))[0].getShot(e):this._missedShotsCells.push(e)}checkSunkenShips(){let e=[];return this._shipList.forEach((t=>{e.push(t.isSunk())})),e.every((e=>1==e))}get getOccupiedCells(){return this._occupiedCells}get getMissedShotsCells(){return this._missedShotsCells}get getShipList(){return this._shipList}get isAIBoard(){return this._isAIBoard}}},507:e=>{e.exports=class{constructor(e,t=!1){this._name=e,this._isAI=t,this._shotCells=[]}takeShot(e){if(this._isAI){let t=null;for(;null===t||this._shotCells.includes(t);)t=Math.floor(Math.random()*e);return this._shotCells.push(t),t}this._shotCells.push(e)}get getName(){return this._name}get getShotCells(){return this._shotCells}}},643:e=>{e.exports=class{constructor(e,t){this._name=e.name,this._size=e.size,this._cellsOccupied=t,this._hits=[]}isSunk(){let e=this._hits.sort(((e,t)=>e-t));return JSON.stringify(this._cellsOccupied)===JSON.stringify(e)}getShot(e){this._hits.push(e)}get getSize(){return this._size}get getHits(){return this._hits}get getCellsOccupied(){return this._cellsOccupied}}}},t={};function s(i){var l=t[i];if(void 0!==l)return l.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=s(507),t=s.n(e),i=s(733),l=s.n(i);const r=document.getElementsByName("shipType"),c=document.querySelectorAll(".counter"),n=document.getElementById("horizontal"),o=document.querySelector(".start");let h,u,a,d,p="Battleship";function m(){h=new(l())(!1),u=new(t())("Tony",!1,!0),a=new(l())(!0),d=new(t())("EasyAI",!0,!1),a.placeShip("Battleship"),a.placeShip("Battlecruiser"),a.placeShip("Destroyer"),a.placeShip("Cruiser"),g()}function g(){const e=document.getElementById("playerBoard");e.innerHTML="";for(let t=0;t<100;t++){let s=document.createElement("div");s.id="p_"+t,s.classList.add("cellPlayer"),h.getOccupiedCells.includes(t)&&s.classList.add("ship"),e.append(s)}const t=document.getElementById("computerBoard");t.innerHTML="";for(let e=0;e<100;e++){let s=document.createElement("div");s.id="c_"+e,s.classList.add("cellComp"),a.getOccupiedCells.includes(e)&&s.classList.add("ship"),t.append(s)}document.querySelectorAll(".cellPlayer").forEach((e=>{e.addEventListener("click",(e=>{h.placeShip(p,n.checked,e.currentTarget.id.split("_")[1]),c.forEach((e=>{e.classList.contains(p)&&e.textContent>0&&(e.textContent=e.textContent-1,e.textContent<=0&&(document.getElementById(p).checked=!1,document.getElementById(p).setAttribute("disabled",!0),p=null))})),g()}))}))}o.addEventListener("click",(()=>{document.querySelectorAll(".cellPlayer").forEach((e=>{e.classList.add("disableEvents")})),document.querySelectorAll(".cellComp").forEach((e=>{e.addEventListener("click",(function e(t){t.currentTarget.classList.add("shot"),t.currentTarget.removeEventListener("click",e),a.receiveShot(t.currentTarget.id.split("_")[1]),a.checkSunkenShips()?confirm("You have won! Play again?")&&m():function(){const e=document.querySelectorAll(".cellPlayer");let t=d.takeShot(100);h.receiveShot(t),e[t].classList.add("shot"),h.checkSunkenShips()&&confirm("You have lost! Play again?")&&m()}()}))}))})),r.forEach((e=>{e.addEventListener("click",(e=>{p=e.currentTarget.id}))})),m()})()})();