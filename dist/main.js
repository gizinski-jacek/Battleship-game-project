(()=>{var e={733:(e,t,s)=>{const i=s(643),l={Cruiser:{name:"Cruiser",size:2},Destroyer:{name:"Destroyer",size:3},Battlecruiser:{name:"Battlecruiser",size:4},Battleship:{name:"Battleship",size:5}},r=Array.from({length:10},((e,t)=>t)).map((e=>10*e)),n=r.map((e=>e+9));e.exports=class{constructor(e=!1){this._isAIBoard=e,this._shipList=[],this._occupiedBoardCells=[],this._missedShotsCells=[]}randomNumber(e){return Math.floor(Math.random()*e)}placeShip(e,t,s){if(!e)return!1;s=Number(s),this._isAIBoard&&(t=this.randomNumber(2),s=this.randomNumber(100));const r=this.calculateShipPlacement(l[e].size,t,s);if(this.checkWallCollisions(r,t)&&this.checkShipCollisions(r,t)){this._occupiedBoardCells=this._occupiedBoardCells.concat(r);const t=new i(l[e],r);return this._shipList.push(t),!0}return!1}calculateShipPlacement(e,t,s){const i=[];for(let l=0;l<e;l++)t?i.push(s+l):i.push(s+10*l);return i}checkWallCollisions(e,t){let s;if(t&&void 0===s){let t=e.slice(1);for(let e=1;e<11;e++){for(let i of t)if(i===11*e-e){s=!0;break}if(s)break}}else e[e.length-1]>99&&(s=!0);return!s}checkShipCollisions(e,t){let s,i=[].concat(e);if(t)for(let t=0;t<e.length;t++)0!==t||r.includes(e[0])?t!==e.length-1||n.includes(e[e.length-1])||(i.push(e[t]-9),i.push(e[t]+1),i.push(e[t]+11)):(i.push(e[t]-11),i.push(e[t]-1),i.push(e[t]+9)),i.push(e[t]-10),i.push(e[t]+10);else for(let t=0;t<e.length;t++)0===t?(i.push(e[t]-11),i.push(e[t]-10),i.push(e[t]-9)):t===e.length-1&&(i.push(e[t]+9),i.push(e[t]+10),i.push(e[t]+11)),i.push(e[t]-1),i.push(e[t]+1);for(let e of i)if(this._occupiedBoardCells.includes(e)){s=!0;break}return!s}receiveShot(e){return e=Number(e),this._occupiedBoardCells.includes(e)?(this._shipList.find((t=>t.cellsOccupied.includes(e))).getShot(e),!0):(this._missedShotsCells.push(e),!1)}checkWinner(){return this._shipList.every((e=>e.isSunk()))}get isAIBoard(){return this._isAIBoard}get shipList(){return this._shipList}get occupiedBoardCells(){return this._occupiedBoardCells}get missedShotsCells(){return this._missedShotsCells}}},507:e=>{e.exports=class{constructor(e=!1){this._isAI=e,this._shotCells=[]}takeShot(e){if(this._isAI){let t=null;for(;!t||this._shotCells.includes(t);)t=Math.floor(Math.random()*e);return this._shotCells.push(t),t}this._shotCells.push(e)}get isAI(){return this._isAI}get shotCells(){return this._shotCells}}},643:e=>{e.exports=class{constructor(e,t){this._name=e.name,this._size=e.size,this._cellsOccupied=t,this._hits=[]}isSunk(){return this._cellsOccupied.every((e=>this._hits.includes(e)))}getShot(e){this._hits.push(e)}get shipSize(){return this._size}get hitsTaken(){return this._hits}get cellsOccupied(){return this._cellsOccupied}}}},t={};function s(i){var l=t[i];if(void 0!==l)return l.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=s(507),t=s.n(e),i=s(733),l=s.n(i);const r=document.getElementsByName("shipType"),n=document.getElementsByTagName("span"),c=document.getElementById("horizontal"),o=document.getElementById("start"),a=document.getElementById("restart"),h=document.querySelector(".shipControls"),d=document.querySelector(".gameboards");let u,p,m,f,_,g;function C(){const e=document.querySelectorAll("input[name=shipType]");for(let t=0;t<e.length;t++)e[t].checked=!1,e[t].disabled=g,c.checked=!0,c.disabled=g}function S(){d.innerHTML="";const e=document.createElement("div");e.id="humanBoard",e.className="board";for(let t=0;t<100;t++){let s=document.createElement("div");s.id="p_"+t,s.classList.add("cellHuman"),u.occupiedBoardCells.includes(t)&&s.classList.add("ship"),e.append(s)}d.append(e),document.querySelectorAll(".cellHuman").forEach((e=>{e.addEventListener("click",(e=>{_?function(e,t,s){u.placeShip(e,t,s)?(u.placeShip(e,t,s),function(e){for(let t of n)t.className===e&&t.textContent>0&&(t.textContent=t.textContent-1,t.textContent<=0&&(document.getElementById(e).checked=!1,document.getElementById(e).setAttribute("disabled",!0),_=null))}(e),S()):alert("Incorrect ship placement!")}(_,c.checked,e.target.id.split("_")[1]):alert("Pick a ship to place!")}))}))}function y(e){e.checkWinner()&&(e.isAIBoard?confirm("You have won! Play again?")?v():B():confirm("You have lost! Play again?")?v():B())}function B(){const e=document.querySelector(".gameboards");let t=e.cloneNode(!0);e.parentNode.replaceChild(t,e)}function v(){u=new(l())(!1),p=new(t())(!1,!0),m=new(l())(!0),f=new(t())("EasyAI",!0,!1),m.placeShip("Battleship"),m.placeShip("Battlecruiser"),m.placeShip("Destroyer"),m.placeShip("Cruiser"),S(),function(){for(let e=0;e<n.length;e++)n[e].textContent=e+1}()}o.addEventListener("click",(()=>{if(!g){g=!0;const e=document.getElementById("humanBoard");let t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),h.style.display="none",c.disabled=g,C(),function(){const e=document.createElement("div");e.id="computerBoard",e.className="board";for(let t=0;t<100;t++){let s=document.createElement("div");s.id="c_"+t,s.classList.add("cellComputer"),m.occupiedBoardCells.includes(t)&&s.classList.add("ship"),e.append(s)}d.append(e)}(),document.querySelectorAll(".cellComputer").forEach((e=>{e.addEventListener("click",(function e(t){t.target.classList.add("shot"),t.target.removeEventListener("click",e);let s=t.target.id.split("_")[1];m.receiveShot(s)?(m.receiveShot(s),y(m)):(m.receiveShot(s),function(){const e=document.querySelectorAll(".cellHuman");let t;do{t=f.takeShot(100),e[t].classList.add("shot"),u.receiveShot()}while(u.receiveShot(t));y(u)}())}))}))}})),a.addEventListener("click",(()=>{g=!1,h.style.display="flex",C(),v()})),r.forEach((e=>{e.addEventListener("click",(e=>{_=e.target.id}))})),v()})()})();