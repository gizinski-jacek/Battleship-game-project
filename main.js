(()=>{var e={733:(e,t,s)=>{const i=s(643),l={Cruiser:{name:"Cruiser",size:2},Destroyer:{name:"Destroyer",size:3},Battlecruiser:{name:"Battlecruiser",size:4},Battleship:{name:"Battleship",size:5}},r=Array.from({length:10},((e,t)=>t)).map((e=>10*e)),n=r.map((e=>e+9));e.exports=class{constructor(e=!1){this._occupiedCells=[],this._missedShotsCells=[],this._shipList=[],this._isAIBoard=e}placeShip(e,t,s){if(!e)return!1;s=Number(s),this._isAIBoard&&(t=this.randomNumber(2),s=this.randomNumber(100));const r=this.calculateShipPlacement(l[e].size,t,s);if(this.checkWallCollisions(r,t)&&this.checkShipCollisions(r,t)){this._occupiedCells=this._occupiedCells.concat(r);const t=new i(l[e],r);return this._shipList.push(t),!0}return!1}calculateShipPlacement(e,t,s){const i=[];for(let l=0;l<e;l++)t?i.push(s+l):i.push(s+10*l);return i}checkWallCollisions(e,t){let s;if(t&&void 0===s){let t=e.slice(1);for(let e=1;e<11;e++){for(let i of t)if(i===11*e-e){s=!0;break}if(s)break}}else e[e.length-1]>99&&(s=!0);return!s}checkShipCollisions(e,t){let s,i=[].concat(e);if(t)for(let t=0;t<e.length;t++)0!==t||r.includes(e[0])?t!==e.length-1||n.includes(e[e.length-1])||(i.push(e[t]-9),i.push(e[t]+1),i.push(e[t]+11)):(i.push(e[t]-11),i.push(e[t]-1),i.push(e[t]+9)),i.push(e[t]-10),i.push(e[t]+10);else for(let t=0;t<e.length;t++)0===t?(i.push(e[t]-11),i.push(e[t]-10),i.push(e[t]-9)):t===e.length-1&&(i.push(e[t]+9),i.push(e[t]+10),i.push(e[t]+11)),i.push(e[t]-1),i.push(e[t]+1);for(let e of i)if(this._occupiedCells.includes(e)){s=!0;break}return!s}randomNumber(e){return Math.floor(Math.random()*e)}receiveShot(e){return e=Number(e),this._occupiedCells.includes(e)?(this._shipList.find((t=>t.getCellsOccupied.includes(e))).getShot(e),!0):(this._missedShotsCells.push(e),!1)}checkWinner(){return this._shipList.every((e=>e.isSunk()))}get getOccupiedCells(){return this._occupiedCells}get getMissedShotsCells(){return this._missedShotsCells}get getShipList(){return this._shipList}get isAIBoard(){return this._isAIBoard}}},507:e=>{e.exports=class{constructor(e,t=!1){this._name=e,this._isAI=t,this._shotCells=[]}takeShot(e){if(this._isAI){let t=null;for(;!t||this._shotCells.includes(t);)t=Math.floor(Math.random()*e);return this._shotCells.push(t),t}this._shotCells.push(e)}get getName(){return this._name}get getShotCells(){return this._shotCells}}},643:e=>{e.exports=class{constructor(e,t){this._name=e.name,this._size=e.size,this._cellsOccupied=t,this._hits=[]}isSunk(){return this._cellsOccupied.every((e=>this._hits.includes(e)))}getShot(e){this._hits.push(e)}get getSize(){return this._size}get getHits(){return this._hits}get getCellsOccupied(){return this._cellsOccupied}}}},t={};function s(i){var l=t[i];if(void 0!==l)return l.exports;var r=t[i]={exports:{}};return e[i](r,r.exports,s),r.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=s(507),t=s.n(e),i=s(733),l=s.n(i);const r=document.getElementsByName("shipType"),n=document.getElementsByTagName("span"),c=document.getElementById("horizontal"),o=document.getElementById("start");let h,u,a,d,p,m=document.getElementById("humanBoard"),g=document.getElementById("computerBoard");function f(){h=new(l())(!1),u=new(t())("Tony",!1,!0),a=new(l())(!0),d=new(t())("EasyAI",!0,!1),a.placeShip("Battleship"),a.placeShip("Battlecruiser"),a.placeShip("Destroyer"),a.placeShip("Cruiser"),_()}function _(){m.innerHTML="";for(let e=0;e<100;e++){let t=document.createElement("div");t.id="p_"+e,t.classList.add("cellHuman"),h.getOccupiedCells.includes(e)&&t.classList.add("ship"),m.append(t)}g.innerHTML="";for(let e=0;e<100;e++){let t=document.createElement("div");t.id="c_"+e,t.classList.add("cellComputer"),a.getOccupiedCells.includes(e)&&t.classList.add("ship"),g.append(t)}document.querySelectorAll(".cellHuman").forEach((e=>{e.addEventListener("click",(e=>{p?function(e,t,s){h.placeShip(e,t,s)?(h.placeShip(e,t,s),function(e){for(let t of n)t.className===e&&t.textContent>0&&(t.textContent=t.textContent-1,t.textContent<=0&&(document.getElementById(e).checked=!1,document.getElementById(e).setAttribute("disabled",!0),p=null))}(e),_()):alert("Incorrect ship placement!")}(p,c.checked,e.currentTarget.id.split("_")[1]):alert("Pick a ship to place!")}))}))}o.addEventListener("click",(()=>{document.querySelectorAll(".cellHuman").forEach((e=>{e.classList.add("disableEvents")})),function(){const e=document.querySelectorAll(".cellComputer");e.forEach((t=>{t.addEventListener("click",(function t(s){console.log(e),console.log(s.currentTarget),s.currentTarget.classList.add("shot"),s.currentTarget.removeEventListener("click",t),a.receiveShot(s.currentTarget.id.split("_")[1])?a.receiveShot(s.currentTarget.id.split("_")[1]):(a.receiveShot(s.currentTarget.id.split("_")[1]),function(){if(a.checkWinner())confirm("You have won! Play again?")&&f();else{const e=document.querySelectorAll(".cellHuman");let t;do{t=d.takeShot(100),e[t].classList.add("shot"),h.receiveShot(t)}while(h.receiveShot(t))}h.checkWinner()&&confirm("You have lost! Play again?")&&f()}())}))}))}()})),r.forEach((e=>{e.addEventListener("click",(e=>{p=e.currentTarget.id}))})),f()})()})();